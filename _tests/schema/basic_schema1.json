{
   "$schema":"http://json-schema.org/draft-07/schema",
   "type":"array",
   "definitions":{"example":{"type":"integer"}},
   "minItems":1,
   "uniqueItems":true,
   "additionaItems":false,
   "items":{
      "type":"object",
      "properties":{"country":{"enum":["United States of America", "Canada", "Netherlands"]}},
      "allOf":[
         {
            "if":{
               "properties":{
                  "country":{
                     "const":"United States of America"
                  }
               }
            },
            "then":{
               "properties":{
                  "postal_code":{
                     "pattern":"[0-9]{5}(-[0-9]{4})?"
                  },
                  "street_address":{
                     "type":"string"
                  },
                  "exam1":{
                     "$ref":"#/definitions/example"
                  },
                  "country":{
                     "enum":[
                        "United States of America",
                        "Canada",
                        "Netherlands"
                     ]
                  }
               },
               "required":[
                  "postal_code",
                  "street_address",
                  "country",
                  "exam1"
               ],
               "additionalProperties":false
            }
         },
         {
            "if":{
               "properties":{
                  "country":{
                     "const":"Canada"
                  }
               }
            },
            "then":{
               "properties":{
                  "postal_code":{
                     "pattern":"[A-Z][0-9][A-Z] [0-9][A-Z][0-9]"
                  },
                  "street_address":{
                     "type":"string"
                  },
                  "country":{
                     "enum":[
                        "United States of America",
                        "Canada",
                        "Netherlands"
                     ]
                  }
               },
               "additionalProperties":false
            }
         },
         {
            "if":{
               "properties":{
                  "country":{
                     "const":"Netherlands"
                  }
               }
            },
            "then":{
               "properties":{
                  "postal_code":{
                     "pattern":"[0-9]{4} [A-Z]{2}"
                  },
                  "street_address":{
                     "type":"string"
                  },
                  "country":{
                     "enum":[
                        "United States of America",
                        "Canada",
                        "Netherlands"
                     ]
                  }
               },
               "additionalProperties":false
            }
         }
      ]
   }
}